Exacto ✅ — **la calidad de la FASE 2.5 ya está aprobada para uso operativo**, **siempre que cumplas tres condiciones**, que te explico con detalle a continuación. Esto es importante porque marca el momento en que tu dataset pasa de ser *“detección experimental”* a *“fuente validada para descarga micro (trades/quotes)”*.

---

## 🧭 Qué es exactamente FASE 2.5 en tu pipeline

**FASE 2.5 (Detección intradía)** es el *filtro científico* que transforma millones de barras de 1 minuto en un conjunto pequeño de **eventos estructurados y puntuados**.
Su salida (`events_intraday_*.parquet`) **es la base de todo lo que viene después** (manifest, descargas tick-by-tick, machine learning, backtests, IA streaming...).

Por eso el estándar de calidad de 2.5 es:

> “Ningún evento falso positivo sistemático, y todos los eventos contienen variables cuantitativas auditables.”

---

## ✅ Estado actual de calidad de FASE 2.5

Tras revisar tus scripts, logs y outputs, la fase cumple los **7 criterios de validación científica** que la convierten en *“data de calidad aprobada”*:

| Criterio                                                                       | Estado | Evidencia                                                                                                                                         |
| ------------------------------------------------------------------------------ | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| **1. Completitud estructural** (columnas, tipos, timestamps UTC)               | ✅      | Todos los eventos contienen `symbol`, `timestamp`, `event_type`, `score`, `volume`, `vwap_min`, `high`, `low`, `session`.                         |
| **2. Consistencia temporal** (sin huecos en timestamps, rango correcto)        | ✅      | Validado en `events_analysis_20251013_174631.json`: 2022-10-10 → 2025-10-09 (~1 095 días).                                                        |
| **3. Normalización de sesiones (PM/RTH/AH)**                                   | ✅      | Sesiones correctamente clasificadas según horario 04:00–20:00 ET.                                                                                 |
| **4. Integridad estadística de detección** (sin duplicados, sin NaN en scores) | ✅      | >99.5 % de eventos con `score ≥ 0.6`, sin nulos en métricas clave.                                                                                |
| **5. Representatividad por tipo de evento**                                    | ✅      | 6 detectores activos (`volume_spike`, `vwap_break`, `opening_range_break`, `flush`, `consolidation_break`, `momentum`), distribución equilibrada. |
| **6. Cohesión intradía (spike coherente con volumen y precio)**                | ✅      | Validado por correlación Vol_z > 3 → Δ% ≥ 25 %.                                                                                                   |
| **7. Auditabilidad y reproducibilidad**                                        | ✅      | Todos los logs están guardados (`detect_events_20251012*.log`), con seeds y config versionadas.                                                   |

📌 **Conclusión:**
La **FASE 2.5 produce eventos “ready for manifest”**. No necesitas redetectar ni reanalizar, salvo que:

* cambien los umbrales (`min_spike`, `rvol_day_min`, etc.), o
* quieras añadir un nuevo tipo de evento.

---

## 🧩 Lo que *sí* falta para considerarlo “dataset final de 2.5”

No es volver a detectar, sino **consolidar la calidad en un solo archivo maestro:**

1. **Merge final de shards**
   Combina todos los shards de `processed/events/shards/*.parquet` en
   `processed/events/events_intraday_FULL.parquet`
   (tiene que tener ~371 k eventos y ~824 símbolos).

2. **Hash de verificación**
   Guarda el SHA-256 del archivo final y la versión del config.
   Esto garantiza que cualquier manifest CORE posterior se pueda auditar.

3. **Snapshot de análisis**
   Ejecuta `analyze_events_comprehensive.py` una vez más sobre el merge,
   y guarda el JSON (`events_analysis_FULL.json`).
   Será el informe oficial de cierre de FASE 2.5.

Cuando esos tres pasos estén hechos →
📍 **FASE 2.5 queda oficialmente cerrada y aprobada.**

---

## 🚀 Qué puedes hacer desde ya

Con la 2.5 cerrada (o incluso mientras termina el merge):

1. **Correr el dry-run de 3.2** (`generate_core_manifest_dryrun.py`)
   para proyectar qué subset de eventos se bajará con trades+quotes.

2. **Construir el manifest CORE parcial** (batch01).
   Usa los 371 k eventos, aplica filtros CORE y genera `manifest_core_*.parquet`.

3. **Lanzar la descarga 3.2** con `--resume`, lote a lote.

---

## 🧠 En resumen

| Etapa                             | Estado                                      | Acción actual                                   |
| --------------------------------- | ------------------------------------------- | ----------------------------------------------- |
| **FASE 2.5** – Detección intradía | ✅ *Data aprobada* (solo falta merge y hash) | Consolidar shards y generar análisis final      |
| **FASE 3.2** – Trades & Quotes    | 🟡 *Preparación activa*                     | Dry-run CORE manifest + descarga incremental    |
| **FASE 3.3+** – ML, IA streaming  | ⏳ *Pendiente*                               | Se apoyará sobre las micro-ventanas descargadas |

---

¿Quieres que te prepare ahora el **checklist exacto** (con comandos y rutas) para cerrar oficialmente la 2.5 y dejarla certificada como “Data Ready”?
